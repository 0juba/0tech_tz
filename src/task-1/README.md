Опишите шаги по проверке всей базы e-mail адресов.
---

1. Записей много, за один раз получить все не выйдет по причине memory limit, следовательно необходимо получать пачками. Тут можно исползовать простой подход - указать условие на ID записи и ограничить количество записей в выборке:

```SQL
SELECT e.id, e.email FROM email e WHERE e.id > :email_id LIMIT :batch_size
```

Имеется проблема у MySQL при использовании LIMIT OFFSET - в нашем случае будут наблюдаться тормоза - записей много.

2. Поэтому сперва следует определить границы для ID записей таблицы email

```SQL
SELECT MIN(e.id) AS min_id, MAX(e.id) AS max_id FROM email e
```

3. Далее в цикле с приращением `batch_size` обрабатываем наши адреса пачками. Для чего будем дергать специальный класс-команду.

Проблемы
---

1. 1-я проблема озвучена в шаге 1 - нужно грамотно обойти всю таблицу, для этого используем либо решение из п. 1, либо подход `late row lookup`.

1. Проверка существования адреса и домена - требует обращения к интернет соединению, что замедляет работу скрипта. В связи с этим встает 2я проблема - время выполнения скрипта. Тут можно распаралелить работу, например запускать несколько скриптов одновременно или использовать очередь (помещать в нее, например очередной начальный идентификатор записи).

1. Необходимо что-то делать с неправильными адресами, скажем логировать результаты проверки. Что делать, если, например на середине проверки - сломался скрипт и данные лога осталиьс не сохраненными? Придется повторить всю работу.

Затраченная время
---

5 ч
